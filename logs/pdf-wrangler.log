2025-09-02 00:03:13.006 [main] INFO  o.example.pdfwrangler.ApplicationKt - Starting ApplicationKt using Java 21.0.3 with PID 80990 (/Users/anton/IdeaProjects/pdf-wrangler/build/classes/kotlin/main started by anton in /Users/anton/IdeaProjects/pdf-wrangler)
2025-09-02 00:03:13.012 [main] INFO  o.example.pdfwrangler.ApplicationKt - The following 1 profile is active: "development"
2025-09-02 00:03:14.549 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-02 00:03:14.550 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-02 00:03:14.592 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-02 00:03:14.892 [main] INFO  SECURITY_AUDIT - Security audit logging system initialized
2025-09-02 00:03:14.904 [main] INFO  SECURITY_AUDIT - [SECURITY_AUDIT] {"eventId":"4b39d465-a337-4780-8a34-616cd00494fd","timestamp":"2025-09-01T21:03:14.894126Z","eventType":"SYSTEM_SECURITY_EVENT","severity":"INFO","message":"Security audit logging system started","details":{"component":"SecurityAuditLogger","status":"initialized"}}
2025-09-02 00:03:14.915 [main] INFO  o.e.p.service.TempFileManagerService - Temporary directory initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-temp
2025-09-02 00:03:15.142 [main] INFO  o.e.p.s.StampLibraryManagementService - Initializing default stamps
2025-09-02 00:03:15.142 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: APPROVED
2025-09-02 00:03:15.524 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: APPROVED with ID: stamp_1756760595143_2496
2025-09-02 00:03:15.524 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: DRAFT
2025-09-02 00:03:15.529 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: DRAFT with ID: stamp_1756760595524_3036
2025-09-02 00:03:15.529 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: CONFIDENTIAL
2025-09-02 00:03:15.533 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: CONFIDENTIAL with ID: stamp_1756760595529_3967
2025-09-02 00:03:15.533 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: URGENT
2025-09-02 00:03:15.535 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: URGENT with ID: stamp_1756760595533_2069
2025-09-02 00:03:15.535 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: REVIEWED
2025-09-02 00:03:15.537 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: REVIEWED with ID: stamp_1756760595535_2542
2025-09-02 00:03:15.537 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: FINAL
2025-09-02 00:03:15.540 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: FINAL with ID: stamp_1756760595537_7890
2025-09-02 00:03:15.540 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: VOID
2025-09-02 00:03:15.542 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: VOID with ID: stamp_1756760595540_9493
2025-09-02 00:03:15.542 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: COPY
2025-09-02 00:03:15.543 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: COPY with ID: stamp_1756760595542_5976
2025-09-02 00:03:15.543 [main] INFO  o.e.p.s.StampLibraryManagementService - Initialized 8 default stamps
2025-09-02 00:03:15.633 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure temporary file handler initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-secure
2025-09-02 00:03:15.635 [main] INFO  o.e.p.s.UploadRateLimitingService - Upload rate limiting service initialized with limits: requests/min=60, requests/hour=1000, daily operations=10000
2025-09-02 00:03:16.010 [main] INFO  o.example.pdfwrangler.ApplicationKt - Started ApplicationKt in 3.645 seconds (process running for 4.333)
2025-09-02 00:03:26.515 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-02 00:03:26.581 [http-nio-8080-exec-1] ERROR o.e.p.c.GlobalExceptionHandler - Unexpected exception for request /actuator/health: No static resource actuator/health.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource actuator/health.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-09-02 00:03:38.218 [http-nio-8080-exec-3] ERROR o.e.p.c.GlobalExceptionHandler - Unexpected exception for request /favicon.ico: No static resource favicon.ico.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-09-02 00:03:48.657 [http-nio-8080-exec-5] ERROR o.e.p.c.GlobalExceptionHandler - Unexpected exception for request /favicon.ico: No static resource favicon.ico.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-09-02 00:04:22.000 [http-nio-8080-exec-6] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:04:22.001 [http-nio-8080-exec-6] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#000000,#000000', using black
2025-09-02 00:04:22.056 [http-nio-8080-exec-6] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'WATERMARK TEST' to 1 pages
2025-09-02 00:04:23.266 [http-nio-8080-exec-6] WARN  o.a.p.p.font.FileSystemFontProvider - 4 new fonts found, font cache will be re-built
2025-09-02 00:04:23.266 [http-nio-8080-exec-6] WARN  o.a.p.p.font.FileSystemFontProvider - Building on-disk font cache, this may take a while
2025-09-02 00:04:23.452 [http-nio-8080-exec-6] WARN  o.a.p.p.font.FileSystemFontProvider - Could not load font file '/System/Library/Fonts/Supplemental/NISC18030.ttf': 'head' table is mandatory
2025-09-02 00:04:23.667 [http-nio-8080-exec-6] WARN  o.a.p.p.font.FileSystemFontProvider - Finished building on-disk font cache, found 813 fonts
2025-09-02 00:04:23.678 [http-nio-8080-exec-6] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#000000,#000000', using black
2025-09-02 00:04:23.686 [http-nio-8080-exec-6] WARN  o.apache.pdfbox.pdfparser.COSParser - The end of the stream doesn't point to the correct offset, using workaround to read the stream, stream start position: 347, length: 44, expected end position: 391
2025-09-02 00:04:23.694 [http-nio-8080-exec-6] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 1 pages
2025-09-02 00:06:27.305 [SpringApplicationShutdownHook] INFO  o.e.p.service.SecureTempFileHandler - Performing secure cleanup of all temporary files
2025-09-02 00:06:27.307 [SpringApplicationShutdownHook] INFO  o.e.p.service.SecureTempFileHandler - Secure cleanup completed. Cleaned 0 files
2025-09-02 00:06:27.309 [SpringApplicationShutdownHook] INFO  o.e.p.service.TempFileManagerService - Performing emergency cleanup of all temporary files
2025-09-02 00:06:27.313 [SpringApplicationShutdownHook] INFO  o.e.p.service.TempFileManagerService - Emergency cleanup completed. Removed 2 temporary files
2025-09-02 00:06:42.204 [main] INFO  o.example.pdfwrangler.ApplicationKt - Starting ApplicationKt using Java 21.0.3 with PID 81389 (/Users/anton/IdeaProjects/pdf-wrangler/build/classes/kotlin/main started by anton in /Users/anton/IdeaProjects/pdf-wrangler)
2025-09-02 00:06:42.206 [main] INFO  o.example.pdfwrangler.ApplicationKt - The following 1 profile is active: "development"
2025-09-02 00:06:43.679 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-02 00:06:43.680 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-02 00:06:43.719 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-02 00:06:44.001 [main] INFO  SECURITY_AUDIT - Security audit logging system initialized
2025-09-02 00:06:44.012 [main] INFO  SECURITY_AUDIT - [SECURITY_AUDIT] {"eventId":"6f88cd2c-e8f9-4808-994e-577ad6952f6a","timestamp":"2025-09-01T21:06:44.003022Z","eventType":"SYSTEM_SECURITY_EVENT","severity":"INFO","message":"Security audit logging system started","details":{"component":"SecurityAuditLogger","status":"initialized"}}
2025-09-02 00:06:44.022 [main] INFO  o.e.p.service.TempFileManagerService - Temporary directory initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-temp
2025-09-02 00:06:44.237 [main] INFO  o.e.p.s.StampLibraryManagementService - Initializing default stamps
2025-09-02 00:06:44.237 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: APPROVED
2025-09-02 00:06:44.580 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: APPROVED with ID: stamp_1756760804238_9547
2025-09-02 00:06:44.581 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: DRAFT
2025-09-02 00:06:44.586 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: DRAFT with ID: stamp_1756760804581_9915
2025-09-02 00:06:44.586 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: CONFIDENTIAL
2025-09-02 00:06:44.589 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: CONFIDENTIAL with ID: stamp_1756760804586_1950
2025-09-02 00:06:44.589 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: URGENT
2025-09-02 00:06:44.590 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: URGENT with ID: stamp_1756760804589_9549
2025-09-02 00:06:44.591 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: REVIEWED
2025-09-02 00:06:44.594 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: REVIEWED with ID: stamp_1756760804591_7301
2025-09-02 00:06:44.594 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: FINAL
2025-09-02 00:06:44.597 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: FINAL with ID: stamp_1756760804594_2840
2025-09-02 00:06:44.599 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: VOID
2025-09-02 00:06:44.602 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: VOID with ID: stamp_1756760804599_7727
2025-09-02 00:06:44.602 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: COPY
2025-09-02 00:06:44.603 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: COPY with ID: stamp_1756760804602_8555
2025-09-02 00:06:44.603 [main] INFO  o.e.p.s.StampLibraryManagementService - Initialized 8 default stamps
2025-09-02 00:06:44.690 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure temporary file handler initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-secure
2025-09-02 00:06:44.691 [main] INFO  o.e.p.s.UploadRateLimitingService - Upload rate limiting service initialized with limits: requests/min=60, requests/hour=1000, daily operations=10000
2025-09-02 00:06:45.065 [main] INFO  o.example.pdfwrangler.ApplicationKt - Started ApplicationKt in 3.442 seconds (process running for 3.851)
2025-09-02 00:07:44.211 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-02 00:08:03.502 [http-nio-8080-exec-4] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:08:03.506 [http-nio-8080-exec-4] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#e40707,#e40707', using black
2025-09-02 00:08:03.558 [http-nio-8080-exec-4] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'test' to 2 pages
2025-09-02 00:08:03.697 [http-nio-8080-exec-4] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#e40707,#e40707', using black
2025-09-02 00:08:03.710 [http-nio-8080-exec-4] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#e40707,#e40707', using black
2025-09-02 00:08:03.711 [http-nio-8080-exec-4] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 2 pages
2025-09-02 00:08:03.727 [http-nio-8080-exec-4] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: jetbrains_junie_description_watermarked.pdf (17398 bytes)
2025-09-02 00:10:08.034 [main] INFO  o.example.pdfwrangler.ApplicationKt - Starting ApplicationKt using Java 21.0.3 with PID 81563 (/Users/anton/IdeaProjects/pdf-wrangler/build/classes/kotlin/main started by anton in /Users/anton/IdeaProjects/pdf-wrangler)
2025-09-02 00:10:08.036 [main] INFO  o.example.pdfwrangler.ApplicationKt - The following 1 profile is active: "development"
2025-09-02 00:10:09.420 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-02 00:10:09.420 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-02 00:10:09.451 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-02 00:10:09.740 [main] INFO  SECURITY_AUDIT - Security audit logging system initialized
2025-09-02 00:10:09.751 [main] INFO  SECURITY_AUDIT - [SECURITY_AUDIT] {"eventId":"3d94f533-8884-44fa-b88e-b2340f7c042c","timestamp":"2025-09-01T21:10:09.741967Z","eventType":"SYSTEM_SECURITY_EVENT","severity":"INFO","message":"Security audit logging system started","details":{"component":"SecurityAuditLogger","status":"initialized"}}
2025-09-02 00:10:09.762 [main] INFO  o.e.p.service.TempFileManagerService - Temporary directory initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-temp
2025-09-02 00:10:10.001 [main] INFO  o.e.p.s.StampLibraryManagementService - Initializing default stamps
2025-09-02 00:10:10.002 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: APPROVED
2025-09-02 00:10:10.366 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: APPROVED with ID: stamp_1756761010003_6000
2025-09-02 00:10:10.366 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: DRAFT
2025-09-02 00:10:10.370 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: DRAFT with ID: stamp_1756761010366_3831
2025-09-02 00:10:10.370 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: CONFIDENTIAL
2025-09-02 00:10:10.374 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: CONFIDENTIAL with ID: stamp_1756761010370_3737
2025-09-02 00:10:10.374 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: URGENT
2025-09-02 00:10:10.376 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: URGENT with ID: stamp_1756761010374_4866
2025-09-02 00:10:10.376 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: REVIEWED
2025-09-02 00:10:10.379 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: REVIEWED with ID: stamp_1756761010376_2757
2025-09-02 00:10:10.380 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: FINAL
2025-09-02 00:10:10.384 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: FINAL with ID: stamp_1756761010380_7325
2025-09-02 00:10:10.385 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: VOID
2025-09-02 00:10:10.386 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: VOID with ID: stamp_1756761010385_4085
2025-09-02 00:10:10.387 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: COPY
2025-09-02 00:10:10.388 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: COPY with ID: stamp_1756761010387_1974
2025-09-02 00:10:10.389 [main] INFO  o.e.p.s.StampLibraryManagementService - Initialized 8 default stamps
2025-09-02 00:10:10.479 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure temporary file handler initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-secure
2025-09-02 00:10:10.481 [main] INFO  o.e.p.s.UploadRateLimitingService - Upload rate limiting service initialized with limits: requests/min=60, requests/hour=1000, daily operations=10000
2025-09-02 00:10:10.859 [main] INFO  o.example.pdfwrangler.ApplicationKt - Started ApplicationKt in 3.531 seconds (process running for 4.537)
2025-09-02 00:10:17.285 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-02 00:11:12.019 [http-nio-8080-exec-3] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:11:12.020 [http-nio-8080-exec-3] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#e51f1f,#e51f1f', using black
2025-09-02 00:11:12.063 [http-nio-8080-exec-3] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'test' to 2 pages
2025-09-02 00:11:12.196 [http-nio-8080-exec-3] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#e51f1f,#e51f1f', using black
2025-09-02 00:11:12.209 [http-nio-8080-exec-3] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#e51f1f,#e51f1f', using black
2025-09-02 00:11:12.211 [http-nio-8080-exec-3] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 2 pages
2025-09-02 00:11:12.221 [http-nio-8080-exec-3] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: jetbrains_junie_description_watermarked.pdf (17469 bytes)
2025-09-02 00:12:11.354 [http-nio-8080-exec-5] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:12:11.355 [http-nio-8080-exec-5] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#f60404,#f60404', using black
2025-09-02 00:12:11.363 [http-nio-8080-exec-5] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'qwerty qwerty qwerty' to 2 pages
2025-09-02 00:12:11.364 [http-nio-8080-exec-5] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#f60404,#f60404', using black
2025-09-02 00:12:11.368 [http-nio-8080-exec-5] WARN  o.e.p.service.TextWatermarkService - Invalid color format '#f60404,#f60404', using black
2025-09-02 00:12:11.370 [http-nio-8080-exec-5] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 2 pages
2025-09-02 00:12:11.375 [http-nio-8080-exec-5] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: jetbrains_junie_description_watermarked.pdf (17408 bytes)
2025-09-02 00:12:44.592 [SpringApplicationShutdownHook] INFO  o.e.p.service.SecureTempFileHandler - Performing secure cleanup of all temporary files
2025-09-02 00:12:44.593 [SpringApplicationShutdownHook] INFO  o.e.p.service.SecureTempFileHandler - Secure cleanup completed. Cleaned 0 files
2025-09-02 00:12:44.594 [SpringApplicationShutdownHook] INFO  o.e.p.service.TempFileManagerService - Performing emergency cleanup of all temporary files
2025-09-02 00:12:44.598 [SpringApplicationShutdownHook] INFO  o.e.p.service.TempFileManagerService - Emergency cleanup completed. Removed 4 temporary files
2025-09-02 00:16:25.922 [main] INFO  o.example.pdfwrangler.ApplicationKt - Starting ApplicationKt using Java 21.0.3 with PID 82182 (/Users/anton/IdeaProjects/pdf-wrangler/build/classes/kotlin/main started by anton in /Users/anton/IdeaProjects/pdf-wrangler)
2025-09-02 00:16:25.924 [main] INFO  o.example.pdfwrangler.ApplicationKt - The following 1 profile is active: "development"
2025-09-02 00:16:27.450 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-02 00:16:27.451 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-02 00:16:27.495 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-02 00:16:27.795 [main] INFO  SECURITY_AUDIT - Security audit logging system initialized
2025-09-02 00:16:27.807 [main] INFO  SECURITY_AUDIT - [SECURITY_AUDIT] {"eventId":"7e4dd3ef-43e2-491f-bb5b-793553ffab48","timestamp":"2025-09-01T21:16:27.797105Z","eventType":"SYSTEM_SECURITY_EVENT","severity":"INFO","message":"Security audit logging system started","details":{"component":"SecurityAuditLogger","status":"initialized"}}
2025-09-02 00:16:27.823 [main] INFO  o.e.p.service.TempFileManagerService - Temporary directory initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-temp
2025-09-02 00:16:28.057 [main] INFO  o.e.p.s.StampLibraryManagementService - Initializing default stamps
2025-09-02 00:16:28.057 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: APPROVED
2025-09-02 00:16:28.473 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: APPROVED with ID: stamp_1756761388058_3036
2025-09-02 00:16:28.473 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: DRAFT
2025-09-02 00:16:28.478 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: DRAFT with ID: stamp_1756761388473_5005
2025-09-02 00:16:28.478 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: CONFIDENTIAL
2025-09-02 00:16:28.482 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: CONFIDENTIAL with ID: stamp_1756761388478_3755
2025-09-02 00:16:28.482 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: URGENT
2025-09-02 00:16:28.485 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: URGENT with ID: stamp_1756761388482_5671
2025-09-02 00:16:28.485 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: REVIEWED
2025-09-02 00:16:28.488 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: REVIEWED with ID: stamp_1756761388485_5282
2025-09-02 00:16:28.489 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: FINAL
2025-09-02 00:16:28.492 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: FINAL with ID: stamp_1756761388490_2832
2025-09-02 00:16:28.492 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: VOID
2025-09-02 00:16:28.495 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: VOID with ID: stamp_1756761388492_7287
2025-09-02 00:16:28.496 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: COPY
2025-09-02 00:16:28.497 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: COPY with ID: stamp_1756761388496_1022
2025-09-02 00:16:28.497 [main] INFO  o.e.p.s.StampLibraryManagementService - Initialized 8 default stamps
2025-09-02 00:16:28.581 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure temporary file handler initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-secure
2025-09-02 00:16:28.583 [main] INFO  o.e.p.s.UploadRateLimitingService - Upload rate limiting service initialized with limits: requests/min=60, requests/hour=1000, daily operations=10000
2025-09-02 00:16:28.973 [main] INFO  o.example.pdfwrangler.ApplicationKt - Started ApplicationKt in 3.662 seconds (process running for 4.173)
2025-09-02 00:16:34.118 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-02 00:16:39.962 [http-nio-8080-exec-2] ERROR o.e.p.c.GlobalExceptionHandler - Unexpected exception for request /favicon.ico: No static resource favicon.ico.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-09-02 00:16:52.289 [http-nio-8080-exec-5] ERROR o.e.p.c.GlobalExceptionHandler - Unexpected exception for request /favicon.ico: No static resource favicon.ico.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-09-02 00:17:05.463 [http-nio-8080-exec-7] ERROR o.e.p.c.GlobalExceptionHandler - Unexpected exception for request /favicon.ico: No static resource favicon.ico.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-09-02 00:18:02.766 [http-nio-8080-exec-8] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:18:02.821 [http-nio-8080-exec-8] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'COLOR TEST' to 1 pages
2025-09-02 00:18:02.989 [http-nio-8080-exec-8] WARN  o.apache.pdfbox.pdfparser.COSParser - The end of the stream doesn't point to the correct offset, using workaround to read the stream, stream start position: 347, length: 44, expected end position: 391
2025-09-02 00:18:02.995 [http-nio-8080-exec-8] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 1 pages
2025-09-02 00:18:03.002 [http-nio-8080-exec-8] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: test_document_watermarked.pdf (945 bytes)
2025-09-02 00:20:58.678 [main] INFO  o.example.pdfwrangler.ApplicationKt - Starting ApplicationKt using Java 21.0.3 with PID 82584 (/Users/anton/IdeaProjects/pdf-wrangler/build/classes/kotlin/main started by anton in /Users/anton/IdeaProjects/pdf-wrangler)
2025-09-02 00:20:58.680 [main] INFO  o.example.pdfwrangler.ApplicationKt - The following 1 profile is active: "development"
2025-09-02 00:20:59.969 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-02 00:20:59.970 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-02 00:21:00.003 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-02 00:21:00.282 [main] INFO  SECURITY_AUDIT - Security audit logging system initialized
2025-09-02 00:21:00.292 [main] INFO  SECURITY_AUDIT - [SECURITY_AUDIT] {"eventId":"97a7a786-e565-4fb0-852a-e09bc0bb30fb","timestamp":"2025-09-01T21:21:00.283166Z","eventType":"SYSTEM_SECURITY_EVENT","severity":"INFO","message":"Security audit logging system started","details":{"component":"SecurityAuditLogger","status":"initialized"}}
2025-09-02 00:21:00.301 [main] INFO  o.e.p.service.TempFileManagerService - Temporary directory initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-temp
2025-09-02 00:21:00.521 [main] INFO  o.e.p.s.StampLibraryManagementService - Initializing default stamps
2025-09-02 00:21:00.521 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: APPROVED
2025-09-02 00:21:00.868 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: APPROVED with ID: stamp_1756761660521_2892
2025-09-02 00:21:00.869 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: DRAFT
2025-09-02 00:21:00.873 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: DRAFT with ID: stamp_1756761660869_9532
2025-09-02 00:21:00.873 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: CONFIDENTIAL
2025-09-02 00:21:00.878 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: CONFIDENTIAL with ID: stamp_1756761660873_4853
2025-09-02 00:21:00.878 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: URGENT
2025-09-02 00:21:00.879 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: URGENT with ID: stamp_1756761660878_8676
2025-09-02 00:21:00.879 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: REVIEWED
2025-09-02 00:21:00.883 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: REVIEWED with ID: stamp_1756761660879_1534
2025-09-02 00:21:00.883 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: FINAL
2025-09-02 00:21:00.886 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: FINAL with ID: stamp_1756761660883_1457
2025-09-02 00:21:00.887 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: VOID
2025-09-02 00:21:00.889 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: VOID with ID: stamp_1756761660887_4284
2025-09-02 00:21:00.890 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: COPY
2025-09-02 00:21:00.891 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: COPY with ID: stamp_1756761660890_4966
2025-09-02 00:21:00.891 [main] INFO  o.e.p.s.StampLibraryManagementService - Initialized 8 default stamps
2025-09-02 00:21:01.017 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure temporary file handler initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-secure
2025-09-02 00:21:01.020 [main] INFO  o.e.p.s.UploadRateLimitingService - Upload rate limiting service initialized with limits: requests/min=60, requests/hour=1000, daily operations=10000
2025-09-02 00:21:01.377 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-09-02 00:21:01.378 [main] INFO  o.e.p.service.SecureTempFileHandler - Performing secure cleanup of all temporary files
2025-09-02 00:21:01.379 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure cleanup completed. Cleaned 0 files
2025-09-02 00:21:01.380 [main] INFO  o.e.p.service.TempFileManagerService - Performing emergency cleanup of all temporary files
2025-09-02 00:21:01.380 [main] INFO  o.e.p.service.TempFileManagerService - Emergency cleanup completed. Removed 0 temporary files
2025-09-02 00:21:01.406 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-09-02 00:21:27.231 [http-nio-8080-exec-1] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:21:27.239 [http-nio-8080-exec-1] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'asdfasdfa qwer qwer ' to 2 pages
2025-09-02 00:21:27.247 [http-nio-8080-exec-1] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 2 pages
2025-09-02 00:21:27.254 [http-nio-8080-exec-1] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: jetbrains_junie_description_watermarked.pdf (17442 bytes)
2025-09-02 00:26:26.999 [main] INFO  o.example.pdfwrangler.ApplicationKt - Starting ApplicationKt using Java 21.0.3 with PID 83044 (/Users/anton/IdeaProjects/pdf-wrangler/build/classes/kotlin/main started by anton in /Users/anton/IdeaProjects/pdf-wrangler)
2025-09-02 00:26:27.002 [main] INFO  o.example.pdfwrangler.ApplicationKt - The following 1 profile is active: "development"
2025-09-02 00:26:28.597 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-02 00:26:28.598 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-02 00:26:28.640 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-02 00:26:28.948 [main] INFO  SECURITY_AUDIT - Security audit logging system initialized
2025-09-02 00:26:28.960 [main] INFO  SECURITY_AUDIT - [SECURITY_AUDIT] {"eventId":"3c5ba0af-a4b9-4b93-a0be-7e48b9ff1df1","timestamp":"2025-09-01T21:26:28.949532Z","eventType":"SYSTEM_SECURITY_EVENT","severity":"INFO","message":"Security audit logging system started","details":{"component":"SecurityAuditLogger","status":"initialized"}}
2025-09-02 00:26:28.972 [main] INFO  o.e.p.service.TempFileManagerService - Temporary directory initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-temp
2025-09-02 00:26:29.202 [main] INFO  o.e.p.s.StampLibraryManagementService - Initializing default stamps
2025-09-02 00:26:29.202 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: APPROVED
2025-09-02 00:26:29.613 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: APPROVED with ID: stamp_1756761989204_4642
2025-09-02 00:26:29.613 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: DRAFT
2025-09-02 00:26:29.618 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: DRAFT with ID: stamp_1756761989613_3007
2025-09-02 00:26:29.618 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: CONFIDENTIAL
2025-09-02 00:26:29.622 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: CONFIDENTIAL with ID: stamp_1756761989618_7342
2025-09-02 00:26:29.622 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: URGENT
2025-09-02 00:26:29.624 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: URGENT with ID: stamp_1756761989622_2169
2025-09-02 00:26:29.624 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: REVIEWED
2025-09-02 00:26:29.627 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: REVIEWED with ID: stamp_1756761989624_7086
2025-09-02 00:26:29.627 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: FINAL
2025-09-02 00:26:29.630 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: FINAL with ID: stamp_1756761989627_8518
2025-09-02 00:26:29.631 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: VOID
2025-09-02 00:26:29.633 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: VOID with ID: stamp_1756761989631_3792
2025-09-02 00:26:29.634 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: COPY
2025-09-02 00:26:29.636 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: COPY with ID: stamp_1756761989635_9380
2025-09-02 00:26:29.636 [main] INFO  o.e.p.s.StampLibraryManagementService - Initialized 8 default stamps
2025-09-02 00:26:29.735 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure temporary file handler initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-secure
2025-09-02 00:26:29.737 [main] INFO  o.e.p.s.UploadRateLimitingService - Upload rate limiting service initialized with limits: requests/min=60, requests/hour=1000, daily operations=10000
2025-09-02 00:26:30.127 [main] INFO  o.example.pdfwrangler.ApplicationKt - Started ApplicationKt in 3.778 seconds (process running for 4.258)
2025-09-02 00:26:36.716 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-02 00:26:53.335 [http-nio-8080-exec-3] ERROR o.e.p.c.GlobalExceptionHandler - Unexpected exception for request /favicon.ico: No static resource favicon.ico.
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-09-02 00:27:44.871 [http-nio-8080-exec-4] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:27:44.919 [http-nio-8080-exec-4] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'ROTATION TEST' to 1 pages
2025-09-02 00:27:45.065 [http-nio-8080-exec-4] WARN  o.apache.pdfbox.pdfparser.COSParser - The end of the stream doesn't point to the correct offset, using workaround to read the stream, stream start position: 347, length: 44, expected end position: 391
2025-09-02 00:27:45.071 [http-nio-8080-exec-4] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 1 pages
2025-09-02 00:27:45.079 [http-nio-8080-exec-4] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: test_document_watermarked.pdf (986 bytes)
2025-09-02 00:28:43.379 [http-nio-8080-exec-5] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:28:43.385 [http-nio-8080-exec-5] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'ROTATION 42' to 1 pages
2025-09-02 00:28:43.387 [http-nio-8080-exec-5] WARN  o.apache.pdfbox.pdfparser.COSParser - The end of the stream doesn't point to the correct offset, using workaround to read the stream, stream start position: 347, length: 44, expected end position: 391
2025-09-02 00:28:43.388 [http-nio-8080-exec-5] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 1 pages
2025-09-02 00:28:43.390 [http-nio-8080-exec-5] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: test_document_watermarked.pdf (994 bytes)
2025-09-02 00:48:25.487 [main] INFO  o.example.pdfwrangler.ApplicationKt - Starting ApplicationKt using Java 21.0.3 with PID 83612 (/Users/anton/IdeaProjects/pdf-wrangler/build/classes/kotlin/main started by anton in /Users/anton/IdeaProjects/pdf-wrangler)
2025-09-02 00:48:25.490 [main] INFO  o.example.pdfwrangler.ApplicationKt - The following 1 profile is active: "development"
2025-09-02 00:48:26.808 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-02 00:48:26.809 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-02 00:48:26.840 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-02 00:48:27.123 [main] INFO  SECURITY_AUDIT - Security audit logging system initialized
2025-09-02 00:48:27.134 [main] INFO  SECURITY_AUDIT - [SECURITY_AUDIT] {"eventId":"44f7fd7d-3bd6-47b2-9ef5-4acb78c1713e","timestamp":"2025-09-01T21:48:27.124505Z","eventType":"SYSTEM_SECURITY_EVENT","severity":"INFO","message":"Security audit logging system started","details":{"component":"SecurityAuditLogger","status":"initialized"}}
2025-09-02 00:48:27.143 [main] INFO  o.e.p.service.TempFileManagerService - Temporary directory initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-temp
2025-09-02 00:48:27.364 [main] INFO  o.e.p.s.StampLibraryManagementService - Initializing default stamps
2025-09-02 00:48:27.365 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: APPROVED
2025-09-02 00:48:27.724 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: APPROVED with ID: stamp_1756763307365_4594
2025-09-02 00:48:27.725 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: DRAFT
2025-09-02 00:48:27.729 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: DRAFT with ID: stamp_1756763307725_5664
2025-09-02 00:48:27.729 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: CONFIDENTIAL
2025-09-02 00:48:27.732 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: CONFIDENTIAL with ID: stamp_1756763307729_7602
2025-09-02 00:48:27.732 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: URGENT
2025-09-02 00:48:27.734 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: URGENT with ID: stamp_1756763307732_9062
2025-09-02 00:48:27.734 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: REVIEWED
2025-09-02 00:48:27.738 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: REVIEWED with ID: stamp_1756763307734_8012
2025-09-02 00:48:27.738 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: FINAL
2025-09-02 00:48:27.741 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: FINAL with ID: stamp_1756763307738_3891
2025-09-02 00:48:27.742 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: VOID
2025-09-02 00:48:27.745 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: VOID with ID: stamp_1756763307743_7992
2025-09-02 00:48:27.745 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: COPY
2025-09-02 00:48:27.746 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: COPY with ID: stamp_1756763307745_6886
2025-09-02 00:48:27.746 [main] INFO  o.e.p.s.StampLibraryManagementService - Initialized 8 default stamps
2025-09-02 00:48:27.836 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure temporary file handler initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-secure
2025-09-02 00:48:27.838 [main] INFO  o.e.p.s.UploadRateLimitingService - Upload rate limiting service initialized with limits: requests/min=60, requests/hour=1000, daily operations=10000
2025-09-02 00:48:28.206 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-09-02 00:48:28.208 [main] INFO  o.e.p.service.SecureTempFileHandler - Performing secure cleanup of all temporary files
2025-09-02 00:48:28.208 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure cleanup completed. Cleaned 0 files
2025-09-02 00:48:28.209 [main] INFO  o.e.p.service.TempFileManagerService - Performing emergency cleanup of all temporary files
2025-09-02 00:48:28.209 [main] INFO  o.e.p.service.TempFileManagerService - Emergency cleanup completed. Removed 0 temporary files
2025-09-02 00:48:28.236 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-09-02 00:49:25.718 [http-nio-8080-exec-9] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:49:25.725 [http-nio-8080-exec-9] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'asdf asdf asd fas df...' to 2 pages
2025-09-02 00:49:25.745 [http-nio-8080-exec-9] ERROR o.e.p.service.TextWatermarkService - Failed to apply text watermark to page 1: Cannot coerce value to an empty range: maximum -124.72443 is less than minimum 0.0.
2025-09-02 00:49:25.747 [http-nio-8080-exec-9] ERROR o.e.p.controller.WatermarkController - Failed to apply text watermark: Failed to apply text watermark to page 1
2025-09-02 00:49:25.754 [http-nio-8080-exec-9] ERROR o.e.p.c.GlobalExceptionHandler - Unexpected exception for request /api/watermark/text: Failed to apply watermark: Failed to apply text watermark to page 1
java.lang.RuntimeException: Failed to apply watermark: Failed to apply text watermark to page 1
	at org.example.pdfwrangler.controller.WatermarkController.applyTextWatermark(WatermarkController.kt:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at org.example.pdfwrangler.controller.WatermarkController$$SpringCGLIB$$0.applyTextWatermark(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method.callMethod(CallerImpl.kt:97)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method$Instance.call(CallerImpl.kt:113)
	at kotlin.reflect.jvm.internal.KCallableImpl.callDefaultMethod$kotlin_reflection(KCallableImpl.kt:207)
	at kotlin.reflect.jvm.internal.KCallableImpl.callBy(KCallableImpl.kt:112)
	at org.springframework.web.method.support.InvocableHandlerMethod$KotlinDelegate.invokeFunction(InvocableHandlerMethod.java:335)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: Failed to apply text watermark to page 1
	at org.example.pdfwrangler.service.TextWatermarkService.applyTextWatermark(TextWatermarkService.kt:81)
	at org.example.pdfwrangler.controller.WatermarkController.applyTextWatermark(WatermarkController.kt:89)
	... 62 common frames omitted
Caused by: java.lang.IllegalArgumentException: Cannot coerce value to an empty range: maximum -124.72443 is less than minimum 0.0.
	at kotlin.ranges.RangesKt___RangesKt.coerceIn(_Ranges.kt:1441)
	at org.example.pdfwrangler.service.WatermarkPositioningService.calculatePosition(WatermarkPositioningService.kt:139)
	at org.example.pdfwrangler.service.TextWatermarkService.applySingleTextWatermark(TextWatermarkService.kt:122)
	at org.example.pdfwrangler.service.TextWatermarkService.applyTextWatermarkToPage(TextWatermarkService.kt:106)
	at org.example.pdfwrangler.service.TextWatermarkService.applyTextWatermark(TextWatermarkService.kt:76)
	... 63 common frames omitted
2025-09-02 00:50:03.315 [main] INFO  o.example.pdfwrangler.ApplicationKt - Starting ApplicationKt using Java 21.0.3 with PID 83664 (/Users/anton/IdeaProjects/pdf-wrangler/build/classes/kotlin/main started by anton in /Users/anton/IdeaProjects/pdf-wrangler)
2025-09-02 00:50:03.317 [main] INFO  o.example.pdfwrangler.ApplicationKt - The following 1 profile is active: "development"
2025-09-02 00:50:04.719 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-09-02 00:50:04.720 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.44]
2025-09-02 00:50:04.758 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-02 00:50:05.059 [main] INFO  SECURITY_AUDIT - Security audit logging system initialized
2025-09-02 00:50:05.070 [main] INFO  SECURITY_AUDIT - [SECURITY_AUDIT] {"eventId":"6e6431d7-ea8e-43d0-b7ad-166a7b5ccd20","timestamp":"2025-09-01T21:50:05.060394Z","eventType":"SYSTEM_SECURITY_EVENT","severity":"INFO","message":"Security audit logging system started","details":{"component":"SecurityAuditLogger","status":"initialized"}}
2025-09-02 00:50:05.081 [main] INFO  o.e.p.service.TempFileManagerService - Temporary directory initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-temp
2025-09-02 00:50:05.307 [main] INFO  o.e.p.s.StampLibraryManagementService - Initializing default stamps
2025-09-02 00:50:05.308 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: APPROVED
2025-09-02 00:50:05.680 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: APPROVED with ID: stamp_1756763405308_2184
2025-09-02 00:50:05.680 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: DRAFT
2025-09-02 00:50:05.685 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: DRAFT with ID: stamp_1756763405681_6753
2025-09-02 00:50:05.685 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: CONFIDENTIAL
2025-09-02 00:50:05.688 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: CONFIDENTIAL with ID: stamp_1756763405685_4159
2025-09-02 00:50:05.688 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: URGENT
2025-09-02 00:50:05.690 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: URGENT with ID: stamp_1756763405688_9648
2025-09-02 00:50:05.690 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: REVIEWED
2025-09-02 00:50:05.694 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: REVIEWED with ID: stamp_1756763405690_3864
2025-09-02 00:50:05.694 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: FINAL
2025-09-02 00:50:05.698 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: FINAL with ID: stamp_1756763405694_1767
2025-09-02 00:50:05.698 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: VOID
2025-09-02 00:50:05.700 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: VOID with ID: stamp_1756763405698_1873
2025-09-02 00:50:05.701 [main] INFO  o.e.p.s.StampLibraryManagementService - Creating stamp: COPY
2025-09-02 00:50:05.702 [main] INFO  o.e.p.s.StampLibraryManagementService - Created stamp: COPY with ID: stamp_1756763405701_8422
2025-09-02 00:50:05.702 [main] INFO  o.e.p.s.StampLibraryManagementService - Initialized 8 default stamps
2025-09-02 00:50:05.780 [main] INFO  o.e.p.service.SecureTempFileHandler - Secure temporary file handler initialized: /var/folders/c_/5_n98lpd65j__pbwgzctxx_80000gn/T/pdf-wrangler-secure
2025-09-02 00:50:05.782 [main] INFO  o.e.p.s.UploadRateLimitingService - Upload rate limiting service initialized with limits: requests/min=60, requests/hour=1000, daily operations=10000
2025-09-02 00:50:06.148 [main] INFO  o.example.pdfwrangler.ApplicationKt - Started ApplicationKt in 3.536 seconds (process running for 4.278)
2025-09-02 00:50:25.550 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-02 00:50:56.527 [http-nio-8080-exec-3] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:50:56.569 [http-nio-8080-exec-3] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'asdf asdf asdf ' to 2 pages
2025-09-02 00:50:56.689 [http-nio-8080-exec-3] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 2 pages
2025-09-02 00:50:56.701 [http-nio-8080-exec-3] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: jetbrains_junie_description_watermarked.pdf (17503 bytes)
2025-09-02 00:51:42.766 [http-nio-8080-exec-5] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:51:42.772 [http-nio-8080-exec-5] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'asdf asdf asdf ' to 2 pages
2025-09-02 00:51:42.777 [http-nio-8080-exec-5] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 2 pages
2025-09-02 00:51:42.783 [http-nio-8080-exec-5] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: jetbrains_junie_description_watermarked.pdf (17447 bytes)
2025-09-02 00:51:58.662 [http-nio-8080-exec-6] INFO  o.e.p.controller.WatermarkController - Applying text watermark to 1 files
2025-09-02 00:51:58.670 [http-nio-8080-exec-6] INFO  o.e.p.service.TextWatermarkService - Applying text watermark 'asdf asdf asdf ' to 2 pages
2025-09-02 00:51:58.678 [http-nio-8080-exec-6] INFO  o.e.p.service.TextWatermarkService - Successfully applied text watermark to 2 pages
2025-09-02 00:51:58.688 [http-nio-8080-exec-6] INFO  o.e.p.controller.WatermarkController - Returning watermarked PDF file: jetbrains_junie_description_watermarked.pdf (17509 bytes)
2025-09-02 00:52:20.301 [SpringApplicationShutdownHook] INFO  o.e.p.service.SecureTempFileHandler - Performing secure cleanup of all temporary files
2025-09-02 00:52:20.302 [SpringApplicationShutdownHook] INFO  o.e.p.service.SecureTempFileHandler - Secure cleanup completed. Cleaned 0 files
2025-09-02 00:52:20.304 [SpringApplicationShutdownHook] INFO  o.e.p.service.TempFileManagerService - Performing emergency cleanup of all temporary files
2025-09-02 00:52:20.312 [SpringApplicationShutdownHook] INFO  o.e.p.service.TempFileManagerService - Emergency cleanup completed. Removed 6 temporary files
